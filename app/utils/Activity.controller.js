

exports.logs_entry = async (data,options,action,module_name,Module) => {
  try {
    const find_tracker_id = options.tracker_id
    const ActivityLogTracker = Module.models.activity_log_tracker
    const ActivityLog = Module.models.activity_log


    if(!find_tracker_id){
      console.log("cannot find tracker id ?????????????????????????????????????????????????????????????????")
        return false;

    }

    const find_tracker = await ActivityLogTracker.findOne({where:{log_tracker_id:find_tracker_id}})
    if(!find_tracker){
      console.log("cannot find tracker data  ???????????????????????????????????????????????????????") 
      return false;
    }
 

   const query = JSON.parse(find_tracker?.query_params || null)
   const activity_data ={
    tenant_id:find_tracker?.tenant_id || null,
    module_id:query?.mdl ||null,
    module_name:module_name,
    user_id:find_tracker.user_id,
    action:action,
    // description:data.description,
    change:JSON.stringify(data),
    // ip_address:data.ip_address,
    id_value:action == 'edit' ? data?.before?.lead_id : data?.lead_id ||null,
    changed_at:new Date(),
}
    await ActivityLog.create(activity_data)

    return true
  } catch (error) {
    console.log(error)
    return false;
  }
};
